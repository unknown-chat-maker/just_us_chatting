<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Private Chat</title>
    <style>
        /* --- CSS STYLES --- */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }

        body {
            background: linear-gradient(180deg, #1a002e 0%, #000000 100%);
            height: 100vh;
            color: white;
            overflow: hidden;
            display: flex;
            justify-content: center;
        }

        /* Login Screen */
        #login-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 100%;
            padding: 20px;
        }

        #login-screen input {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid #a020f0;
            color: white;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
            font-size: 1.2rem;
            width: 80%;
            margin-bottom: 20px;
        }

        /* Main App Layout */
        #chat-app {
            display: none;
            flex-direction: column;
            width: 100%;
            height: 100dvh;
            max-width: 500px;
        }

        /* Header & Search */
        .header {
            padding: 10px;
            background: rgba(0, 0, 0, 0.5);
            border-bottom: 0.5px solid #333;
        }

        .search-bar {
            width: 100%;
            padding: 8px 15px;
            background: #262626;
            border: none;
            border-radius: 10px;
            color: white;
            margin-bottom: 10px;
        }

        .tabs {
            display: flex;
            justify-content: space-around;
        }

        .tab-btn {
            background: none;
            border: none;
            color: #8e8e8e;
            padding: 10px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .tab-btn.active {
            color: white;
            border-bottom: 2px solid white;
        }

        /* Content Areas */
        .content-area { flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; }
        #media-grid, #links-list { display: none; }

        /* Messages */
        .msg {
            max-width: 75%;
            padding: 10px 14px;
            border-radius: 18px;
            margin-bottom: 8px;
            font-size: 0.95rem;
            word-wrap: break-word;
        }

        .msg.left {
            background: #262626;
            align-self: flex-start;
            border-bottom-left-radius: 4px;
        }

        .msg.right {
            background: linear-gradient(45deg, #a020f0, #6a0dad);
            align-self: flex-end;
            border-bottom-right-radius: 4px;
        }

        /* Media Grid */
        #media-grid { grid-template-columns: repeat(3, 1fr); gap: 2px; }
        .media-item { width: 100%; aspect-ratio: 1/1; object-fit: cover; }

        /* Links List */
        .link-item {
            background: #1a1a1a;
            padding: 12px;
            border-radius: 10px;
            margin-bottom: 10px;
            color: #3897f0;
            text-decoration: none;
            font-size: 0.9rem;
            display: block;
        }

        /* Footer */
        .footer {
            padding: 10px;
            background: black;
            display: flex;
            align-items: center;
            gap: 8px;
            border-top: 0.5px solid #333;
        }

        .input-box {
            flex: 1;
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 20px;
            padding: 10px 15px;
            color: white;
            outline: none;
        }

        .btn-group { display: flex; gap: 5px; }

        .send-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            color: white;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .btn-l { background: #333; } /* Left user */
        .btn-r { background: #a020f0; } /* Right user */

    </style>
</head>
<body>

    <div id="login-screen">
        <h2 style="margin-bottom: 20px;">Private Access</h2>
        <input type="password" id="pass-input" placeholder="Passcode" inputmode="numeric">
        <button onclick="unlock()" style="background:#a020f0; border:none; color:white; padding:12px 30px; border-radius:10px;">Enter</button>
    </div>

    <div id="chat-app">
        <div class="header">
            <input type="text" class="search-bar" id="search-input" placeholder="Search messages..." onkeyup="searchMsgs()">
            <div class="tabs">
                <button class="tab-btn active" id="t-msg" onclick="switchTab('msg')">Messages</button>
                <button class="tab-btn" id="t-media" onclick="switchTab('media')">Media</button>
                <button class="tab-btn" id="t-links" onclick="switchTab('links')">Links</button>
            </div>
        </div>

        <div id="msg-content" class="content-area">
            <div class="msg left">Welcome! Use the left arrow for User A and right arrow for User B.</div>
        </div>

        <div id="media-grid" class="content-area"></div>

        <div id="links-list" class="content-area"></div>

        <div class="footer">
            <input type="file" id="f-upload" style="display:none" onchange="handleFile(this)">
            <button onclick="document.getElementById('f-upload').click()" style="background:none; border:none; font-size:1.5rem;">üñºÔ∏è</button>
            
            <input type="text" id="main-input" class="input-box" placeholder="Message...">
            
            <div class="btn-group">
                <button class="send-btn btn-l" onclick="send('left')">‚Üê</button>
                <button class="send-btn btn-r" onclick="send('right')">‚Üí</button>
            </div>
        </div>
    </div>

    <script>
        function unlock() {
            if(document.getElementById('pass-input').value === "112011") {
                document.getElementById('login-screen').style.display = 'none';
                document.getElementById('chat-app').style.display = 'flex';
            } else { alert("Wrong code"); }
        }

        function switchTab(type) {
            const sections = ['msg-content', 'media-grid', 'links-list'];
            const tabs = ['t-msg', 't-media', 't-links'];
            
            sections.forEach(s => document.getElementById(s).style.display = 'none');
            tabs.forEach(t => document.getElementById(t).classList.remove('active'));

            if(type === 'msg') document.getElementById('msg-content').style.display = 'flex';
            if(type === 'media') document.getElementById('media-grid').style.display = 'grid';
            if(type === 'links') document.getElementById('links-list').style.display = 'block';
            
            document.getElementById('t-' + type).classList.add('active');
        }

        function send(side) {
            const input = document.getElementById('main-input');
            const text = input.value.trim();
            if(!text) return;

            // Add to Chat
            const msgDiv = document.createElement('div');
            msgDiv.className = `msg ${side}`;
            msgDiv.innerText = text;
            document.getElementById('msg-content').appendChild(msgDiv);

            // Link Detection
            const urlPattern = /(https?:\/\/[^\s]+)/g;
            if(urlPattern.test(text)) {
                const links = text.match(urlPattern);
                links.forEach(url => {
                    const linkA = document.createElement('a');
                    linkA.href = url;
                    linkA.target = "_blank";
                    linkA.className = "link-item";
                    linkA.innerText = url;
                    document.getElementById('links-list').appendChild(linkA);
                });
            }

            input.value = "";
            const area = document.getElementById('msg-content');
            area.scrollTop = area.scrollHeight;
        }

        function handleFile(input) {
            const file = input.files[0];
            if(!file) return;
            const reader = new FileReader();
            reader.onload = function(e) {
                // Add to Media Tab
                const img = document.createElement('img');
                img.src = e.target.result;
                img.className = 'media-item';
                document.getElementById('media-grid').appendChild(img);
                
                // Add to chat (as right side by default for media)
                const msgDiv = document.createElement('div');
                msgDiv.className = `msg right`;
                const chatImg = document.createElement('img');
                chatImg.src = e.target.result;
                chatImg.style.width = "100%";
                chatImg.style.borderRadius = "10px";
                msgDiv.appendChild(chatImg);
                document.getElementById('msg-content').appendChild(msgDiv);
            }
            reader.readAsDataURL(file);
        }

        function searchMsgs() {
            const query = document.getElementById('search-input').value.toLowerCase();
            const messages = document.querySelectorAll('#msg-content .msg');
            messages.forEach(m => {
                const text = m.innerText.toLowerCase();
                m.style.display = text.includes(query) ? "block" : "none";
            });
        }
    </script>
</body>
</html>
